<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>@octokit test</title>
    <script type="module">
        const  outputDiv = document.getElementById("outputDiv");
        outputDiv.innerHTML = "Loading...";
        import { Octokit, App } from "https://cdn.skypack.dev/octokit";
  
        // Create a personal access token at https://github.com/settings/tokens/new?scopes=repo
        const octokit = new Octokit({ 
            auth: `pat-token` 
        });

        // Compare: https://docs.github.com/en/rest/reference/users#get-the-authenticated-user
        const {
        data: { login },
        } = await octokit.rest.users.getAuthenticated();
        console.log("Hello, %s", login);
  
        outputDiv.innerHTML = '';
        async function getDefaultBranch(ownerName, repoName) {
            const result = await octokit.request('GET /repos/{owner}/{repo}', {
                owner: ownerName,
                repo: repoName
                })
            outputDiv.innerHTML += `<p>Default branch for ${repoName} is ${result.data.default_branch}</p>`;
            return result.data.default_branch;
        }

        await getDefaultBranch('gitstua', '.github');     
        getDefaultBranch('gitstua', 'settings');     
        getDefaultBranch('gitstua', 'nocontent');   
        getDefaultBranch('DadsTaxi', 'repo-with-master-default');   
         </script>
  </head>
  <body>
    <h1>Browser test for <code>@octokit</code></h1>

    <div id="outputDiv"></div>


  </body>
</html>
